<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>API - streamgraph</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../assets/_mkdocstrings.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "API";
        var mkdocs_page_input_path = "api.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> streamgraph
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../guide/">Streamgraph demo</a>
                </li>
              </ul>
              <ul class="current">
                <li class="toctree-l1 current"><a class="reference internal current" href="#">API</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#streamgraph">streamgraph</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#streamgraph.catmull_rom_interpolate">catmull_rom_interpolate</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#streamgraph.moving_average">moving_average</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#streamgraph.pchip_interpolate">pchip_interpolate</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#streamgraph.plot_streamgraph">plot_streamgraph</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#streamgraph.smooth_series">smooth_series</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#streamgraph.streamgraph_envelopes">streamgraph_envelopes</a>
    </li>
        </ul>
    </li>
    </ul>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">streamgraph</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">API</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/yourname/streamgraph/edit/master/docs/api.md" class="icon icon-github"> Edit on GitHub</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="api-reference">API Reference<a class="headerlink" href="#api-reference" title="Permanent link">&para;</a></h1>


<div class="doc doc-object doc-module">



<h2 id="streamgraph" class="doc doc-heading">
            <span class="doc doc-object-name doc-module-name">streamgraph</span>


<a href="#streamgraph" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents first">

        <p>A compact Matplotlib streamgraph helper with options for
- sorted or unsorted ordering
- margins (vertical gaps) between streams
- optional value smoothing (moving-average)
- boundary curve smoothing with shape-preserving PCHIP splines (default)
- optional Catmullâ€“Rom boundary curves
- label placement at each layer's fattest point
- colormap selection</p>
<p>Author: Max Noichl &amp; ðŸ¦–</p>










  <div class="doc doc-children">










<div class="doc doc-object doc-function">


<h3 id="streamgraph.catmull_rom_interpolate" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">catmull_rom_interpolate</span>


<a href="#streamgraph.catmull_rom_interpolate" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">catmull_rom_interpolate</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">samples_per_seg</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Return dense x_s, y_s that pass through all control points using Catmullâ€“Rom splines.
samples_per_seg &gt;= 1. When 1, each segment contributes one interior sample and the end
point of the final segment is appended once.</p>


    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="streamgraph.moving_average" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">moving_average</span>


<a href="#streamgraph.moving_average" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">moving_average</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">window</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Centered moving average with reflection at the edges.
window must be odd and at least 1. When window &lt;= 1 no smoothing is applied.</p>


    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="streamgraph.pchip_interpolate" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">pchip_interpolate</span>


<a href="#streamgraph.pchip_interpolate" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">pchip_interpolate</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">samples_per_seg</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Return dense (xp, yp) sampled using a shape-preserving cubic (PCHIP).</p>
<ul>
<li>Uses SciPy's PchipInterpolator when available for numerical robustness.</li>
<li>Falls back to a pure NumPy Fritschâ€“Carlson implementation otherwise.</li>
</ul>


    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="streamgraph.plot_streamgraph" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">plot_streamgraph</span>


<a href="#streamgraph.plot_streamgraph" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">plot_streamgraph</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">Y</span><span class="p">,</span> <span class="n">labels</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">sorted_streams</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">margin_frac</span><span class="o">=</span><span class="mf">0.08</span><span class="p">,</span> <span class="n">smooth_window</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">label_placement</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">label_position</span><span class="o">=</span><span class="s1">&#39;balanced&#39;</span><span class="p">,</span> <span class="n">label_color</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">label_fontsize</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">label_weight</span><span class="o">=</span><span class="s1">&#39;bold&#39;</span><span class="p">,</span> <span class="n">curve_samples</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">curve_method</span><span class="o">=</span><span class="s1">&#39;pchip&#39;</span><span class="p">,</span> <span class="n">baseline</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="n">wiggle_reduction</span><span class="o">=</span><span class="s1">&#39;weighted&#39;</span><span class="p">,</span> <span class="n">pad_frac</span><span class="o">=</span><span class="mf">0.05</span><span class="p">,</span> <span class="n">label_min_gap_frac</span><span class="o">=</span><span class="mf">0.02</span><span class="p">,</span> <span class="n">label_edge_offset_frac</span><span class="o">=</span><span class="mf">0.02</span><span class="p">,</span> <span class="n">label_connectors</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">label_connector_color</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">label_connector_alpha</span><span class="o">=</span><span class="mf">0.6</span><span class="p">,</span> <span class="n">label_connector_linewidth</span><span class="o">=</span><span class="mf">0.8</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">label_kwargs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">label_anchor</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="n">label_plot_anchors</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">label_point_kwargs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">label_balanced_inset_frac</span><span class="o">=</span><span class="mf">0.05</span><span class="p">,</span> <span class="n">label_fontsize_min</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">label_fontsize_max</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">label_fontsize_by</span><span class="o">=</span><span class="s1">&#39;sum&#39;</span><span class="p">,</span> <span class="n">label_balanced_progress</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">label_balanced_fit_tolerance_px</span><span class="o">=</span><span class="mf">2.0</span><span class="p">,</span> <span class="n">label_balanced_debug_segments</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">label_balanced_debug_kwargs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">label_balanced_candidates_per_layer</span><span class="o">=</span><span class="mi">60</span><span class="p">,</span> <span class="n">label_balanced_restarts</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">label_balanced_T0</span><span class="o">=</span><span class="mf">2.5</span><span class="p">,</span> <span class="n">label_balanced_T_min</span><span class="o">=</span><span class="mf">0.0005</span><span class="p">,</span> <span class="n">label_balanced_alpha</span><span class="o">=</span><span class="mf">0.94</span><span class="p">,</span> <span class="n">label_balanced_iters_per_T</span><span class="o">=</span><span class="mi">240</span><span class="p">,</span> <span class="n">label_balanced_min_thickness_q</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Plot a configurable streamgraph.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>X</code></b>
                  (<code><span title="array">array</span>(<span title="n">n</span>)</code>)
              â€“
              <div class="doc-md-description">
                
              </div>
            </li>
            <li>
              <b><code>Y</code></b>
                  (<code>array (k, n) with non-negative values</code>)
              â€“
              <div class="doc-md-description">
                
              </div>
            </li>
            <li>
              <b><code>labels</code></b>
                  (<code>list of strings</code>, default:
                      <code>None</code>
)
              â€“
              <div class="doc-md-description">
                
              </div>
            </li>
            <li>
              <b><code>sorted_streams</code></b>
                  (<code><span title="bool">bool</span></code>, default:
                      <code>False</code>
)
              â€“
              <div class="doc-md-description">
                <p>If True, layers are re-ordered by magnitude at each x.</p>
              </div>
            </li>
            <li>
              <b><code>margin_frac</code></b>
                  (<code><span title="float">float</span></code>, default:
                      <code>0.08</code>
)
              â€“
              <div class="doc-md-description">
                <p>Fraction of column sum reserved as vertical gaps between layers.</p>
              </div>
            </li>
            <li>
              <b><code>smooth_window</code></b>
                  (<code><span title="int">int</span></code>, default:
                      <code>1</code>
)
              â€“
              <div class="doc-md-description">
                <p>Moving-average window along the time axis. 1 keeps raw values.</p>
              </div>
            </li>
            <li>
              <b><code>cmap</code></b>
                  (<code><span title="str">str</span> | <span title="typing.Sequence">Sequence</span>[<span title="str">str</span>] | <span title="typing.Mapping">Mapping</span>[<span title="str">str</span>, <span title="str">str</span>] | None</code>, default:
                      <code>None</code>
)
              â€“
              <div class="doc-md-description">
                <ul>
<li>If str: Matplotlib colormap name.</li>
<li>If Sequence[str]: explicit list/tuple of colors for layers (cycled if shorter).</li>
<li>If Mapping[str, str]: dictionary mapping label -&gt; color. Labels not
  present fall back to the default property cycle. Requires <code>labels</code>.</li>
<li>If None: use the default property cycle.</li>
</ul>
              </div>
            </li>
            <li>
              <b><code>linewidth</code></b>
                  (<code>appearance controls.</code>, default:
                      <code>0.0</code>
)
              â€“
              <div class="doc-md-description">
                
              </div>
            </li>
            <li>
              <b><code>alpha</code></b>
                  (<code>appearance controls.</code>, default:
                      <code>0.0</code>
)
              â€“
              <div class="doc-md-description">
                
              </div>
            </li>
            <li>
              <b><code>label_placement</code></b>
                  (<code><span title="bool">bool</span></code>, default:
                      <code>True</code>
)
              â€“
              <div class="doc-md-description">
                <p>Whether to place labels for each layer.</p>
              </div>
            </li>
            <li>
              <b><code>label_position</code></b>
                  (<code>(&#39;peak&#39;, &#39;start&#39;, &#39;end&#39;, &#39;max_width&#39;, &#39;balanced&#39;)</code>, default:
                      <code>&#39;peak&#39;,&#39;start&#39;,&#39;end&#39;,&#39;max_width&#39;,&#39;balanced&#39;</code>
)
              â€“
              <div class="doc-md-description">
                <p>Where to place labels when label_placement is True. 'peak' places at
the fattest point. 'start' places near the first appearance of the stream
with right alignment; 'end' (default) places near the last appearance
with left alignment. X-limits are extended slightly for 'start'/'end'
to avoid clipping. 'max_width' places all labels along the same
vertical slice x<em> where the total stack height is maximal, centered
vertically within each stream at that x</em>. 'balanced' searches over
many candidate points (including interpolated in-betweens when
curve_samples&gt;1) and uses a small simulated-annealing pass to select
non-overlapping label positions inside the plotting area, preferring
vertically near the top third of each stream.</p>
              </div>
            </li>
            <li>
              <b><code>label_color</code></b>
                  (<code><span title="str">str</span> or <span title="list">list</span>[<span title="str">str</span>] or None</code>, default:
                      <code>None</code>
)
              â€“
              <div class="doc-md-description">
                <p>Text color(s) for labels. If a list is provided, it should match the number
of layers. None defaults to white for readability on colored streams.</p>
              </div>
            </li>
            <li>
              <b><code>label_fontsize</code></b>
                  (<code><span title="int">int</span></code>, default:
                      <code>10</code>
)
              â€“
              <div class="doc-md-description">
                <p>Font size for label text.</p>
              </div>
            </li>
            <li>
              <b><code>label_weight</code></b>
                  (<code><span title="str">str</span></code>, default:
                      <code>&#39;bold&#39;</code>
)
              â€“
              <div class="doc-md-description">
                <p>Font weight for label text, e.g., 'normal', 'bold'.</p>
              </div>
            </li>
            <li>
              <b><code>curve_samples</code></b>
                  (<code><span title="int">int</span></code>, default:
                      <code>200</code>
)
              â€“
              <div class="doc-md-description">
                <p>When &gt;= 2, densify boundaries between sample points.</p>
              </div>
            </li>
            <li>
              <b><code>curve_method</code></b>
                  (<code>(&#39;pchip&#39;, &#39;catmull_rom&#39;)</code>, default:
                      <code>&#39;pchip&#39;,&#39;catmull_rom&#39;</code>
)
              â€“
              <div class="doc-md-description">
                <p>Interpolation method for boundary curves when curve_samples &gt;= 2.
'pchip' (default) is shape-preserving and prevents overshoot.
'catmull_rom' is a classic C^1 cubic that can overshoot but is smooth.</p>
              </div>
            </li>
            <li>
              <b><code>baseline</code></b>
                  (<code>currently only &#39;center&#39; is supported.</code>, default:
                      <code>&#39;center&#39;</code>
)
              â€“
              <div class="doc-md-description">
                
              </div>
            </li>
            <li>
              <b><code>wiggle_reduction</code></b>
                  (<code>(&#39;none&#39;, &#39;unweighted&#39;, &#39;weighted&#39;)</code>, default:
                      <code>&#39;none&#39;,&#39;unweighted&#39;,&#39;weighted&#39;</code>
)
              â€“
              <div class="doc-md-description">
                <p>Baseline strategy used to reduce wiggle. 'none' reproduces the classic
centered ThemeRiver-style baseline. 'unweighted' uses the closed-form
deviation-minimizing baseline. 'weighted' uses the Streamgraph baseline
derived from minimizing weighted midline slopes (requires X). Implemented after Byron &amp; Wattenberg.</p>
              </div>
            </li>
            <li>
              <b><code>pad_frac</code></b>
                  (<code><span title="float">float</span></code>, default:
                      <code>0.05</code>
)
              â€“
              <div class="doc-md-description">
                <p>Vertical padding fraction for y-limits.</p>
              </div>
            </li>
            <li>
              <b><code>ax</code></b>
                  (<code>optional Matplotlib Axes.</code>, default:
                      <code>None</code>
)
              â€“
              <div class="doc-md-description">
                
              </div>
            </li>
            <li>
              <b><code>label_min_gap_frac</code></b>
                  (<code><span title="float">float</span></code>, default:
                      <code>0.02</code>
)
              â€“
              <div class="doc-md-description">
                <p>Minimum vertical gap between labels as a fraction of the y-range when
using 'start' or 'end' placement. Helps reduce label overlap.</p>
              </div>
            </li>
            <li>
              <b><code>label_edge_offset_frac</code></b>
                  (<code><span title="float">float</span></code>, default:
                      <code>0.02</code>
)
              â€“
              <div class="doc-md-description">
                <p>Horizontal offset of labels from the data edge for 'start'/'end'
placement, expressed as a fraction of the x-range.</p>
              </div>
            </li>
            <li>
              <b><code>label_connectors</code></b>
                  (<code><span title="bool">bool</span></code>, default:
                      <code>False</code>
)
              â€“
              <div class="doc-md-description">
                <p>Whether to draw connector lines from labels back to their stream edge
when using 'start' or 'end' placement. Useful when vertical de-overlap
moves labels away from their exact center.</p>
              </div>
            </li>
            <li>
              <b><code>label_connector_color</code></b>
                  (<code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>, default:
                      <code>None</code>
)
              â€“
              <div class="doc-md-description">
                <p>Styling for connector lines. By default, the connector color matches
the label text color for that layer when a single color is provided,
else uses a neutral grey when unspecified.</p>
              </div>
            </li>
            <li>
              <b><code>label_connector_alpha</code></b>
                  (<code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>, default:
                      <code>None</code>
)
              â€“
              <div class="doc-md-description">
                <p>Styling for connector lines. By default, the connector color matches
the label text color for that layer when a single color is provided,
else uses a neutral grey when unspecified.</p>
              </div>
            </li>
            <li>
              <b><code>label_connector_linewidth</code></b>
                  (<code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>, default:
                      <code>None</code>
)
              â€“
              <div class="doc-md-description">
                <p>Styling for connector lines. By default, the connector color matches
the label text color for that layer when a single color is provided,
else uses a neutral grey when unspecified.</p>
              </div>
            </li>
            <li>
              <b><code>label_kwargs</code></b>
                  (<code><span title="dict">dict</span> | None</code>, default:
                      <code>None</code>
)
              â€“
              <div class="doc-md-description">
                <p>Extra Matplotlib text properties for labels (e.g., {'fontsize': 12,
'fontfamily': 'DejaVu Sans'}). These override the standard
label_fontsize/label_weight/label_color when provided.</p>
              </div>
            </li>
            <li>
              <b><code>label_anchor</code></b>
                  (<code>{&#39;center&#39;,&#39;left&#39;,&#39;right&#39;,&#39;top&#39;,&#39;bottom&#39;,&#39;top_left&#39;,&#39;top_right&#39;,</code>, default:
                      <code>&#39;center&#39;</code>
)
              â€“
              <div class="doc-md-description">
                <div class="highlight"><pre><span></span><code>        &#39;bottom_left&#39;,&#39;bottom_right&#39;,&#39;middle_left&#39;,&#39;middle_right&#39;}
</code></pre></div>
<p>Anchor point of the text box relative to (x,y) for 'peak','max_width',
and 'balanced'.</p>
              </div>
            </li>
            <li>
              <b><code>label_plot_anchors</code></b>
                  (<code><span title="bool">bool</span></code>, default:
                      <code>False</code>
)
              â€“
              <div class="doc-md-description">
                <p>When True and position in {'peak','max_width','balanced'}, plot the
chosen anchor points.</p>
              </div>
            </li>
            <li>
              <b><code>label_point_kwargs</code></b>
                  (<code><span title="dict">dict</span> | None</code>, default:
                      <code>None</code>
)
              â€“
              <div class="doc-md-description">
                <p>Styling for anchor point markers (e.g., {'s': 12, 'color': 'k'}).</p>
              </div>
            </li>
            <li>
              <b><code>label_balanced_inset_frac</code></b>
                  (<code><span title="float">float</span></code>, default:
                      <code>0.05</code>
)
              â€“
              <div class="doc-md-description">
                <p>Fraction of the x-range to keep clear on the left/right when using
'balanced' placement. This discourages labels from hugging the edges
and provides a clean margin for the optimizer's grid distribution.</p>
              </div>
            </li>
            <li>
              <b><code>label_fontsize_min</code></b>
                  (<code><span title="float">float</span> | None</code>, default:
                      <code>None</code>
)
              â€“
              <div class="doc-md-description">
                <p>When both provided, per-layer label sizes are scaled linearly between
these bounds according to <code>label_fontsize_by</code> (default: total sum of
the stream). If either is None, all labels use <code>label_fontsize</code> or
any explicit <code>fontsize</code> in <code>label_kwargs</code>.</p>
              </div>
            </li>
            <li>
              <b><code>label_fontsize_max</code></b>
                  (<code><span title="float">float</span> | None</code>, default:
                      <code>None</code>
)
              â€“
              <div class="doc-md-description">
                <p>When both provided, per-layer label sizes are scaled linearly between
these bounds according to <code>label_fontsize_by</code> (default: total sum of
the stream). If either is None, all labels use <code>label_fontsize</code> or
any explicit <code>fontsize</code> in <code>label_kwargs</code>.</p>
              </div>
            </li>
            <li>
              <b><code>label_fontsize_by</code></b>
                  (<code>(&#39;sum&#39;, &#39;max&#39;, &#39;mean&#39;)</code>, default:
                      <code>&#39;sum&#39;,&#39;max&#39;,&#39;mean&#39;</code>
)
              â€“
              <div class="doc-md-description">
                <p>Statistic used to scale label sizes by stream magnitude.</p>
              </div>
            </li>
            <li>
              <b><code>label_balanced_progress</code></b>
                  (<code><span title="bool">bool</span></code>, default:
                      <code>False</code>
)
              â€“
              <div class="doc-md-description">
                <p>When True and using 'balanced', shows a tqdm progress bar over the
annealing temperature schedule (requires tqdm).</p>
              </div>
            </li>
            <li>
              <b><code>label_balanced_fit_tolerance_px</code></b>
                  (<code><span title="float">float</span></code>, default:
                      <code>2.0</code>
)
              â€“
              <div class="doc-md-description">
                <p>Small vertical tolerance in pixels allowed when checking that the
label's bounding box fits within the stream; avoids overly strict
rejections due to rounding and transforms.</p>
              </div>
            </li>
            <li>
              <b><code>label_balanced_debug_segments</code></b>
                  (<code><span title="bool">bool</span></code>, default:
                      <code>False</code>
)
              â€“
              <div class="doc-md-description">
                <p>When True and using 'balanced', plot each layer's candidate x-segments
as thick bright lines along the mid-line for debugging.</p>
              </div>
            </li>
            <li>
              <b><code>label_balanced_debug_kwargs</code></b>
                  (<code><span title="dict">dict</span> | None</code>, default:
                      <code>None</code>
)
              â€“
              <div class="doc-md-description">
                <p>Styling overrides for the debug segments (default: lime, lw=4, alpha=0.9).</p>
              </div>
            </li>
            <li>
              <b><code>label_balanced_candidates_per_layer</code></b>
                  (<code><span title="int">int</span></code>, default:
                      <code>60</code>
)
              â€“
              <div class="doc-md-description">
                <p>Maximum number of candidate x-positions per layer used by the optimizer.</p>
              </div>
            </li>
            <li>
              <b><code>label_balanced_restarts</code></b>
                  (<code><span title="int">int</span></code>, default:
                      <code>2</code>
)
              â€“
              <div class="doc-md-description">
                <p>Number of random restarts of the annealer; the best layout is kept.</p>
              </div>
            </li>
            <li>
              <b><code>label_balanced_T0</code></b>
                  (<code><span title="float">float</span></code>, default:
                      <code>2.5</code>
)
              â€“
              <div class="doc-md-description">
                <p>Initial and minimum temperatures for simulated annealing.</p>
              </div>
            </li>
            <li>
              <b><code>label_balanced_T_min</code></b>
                  (<code><span title="float">float</span></code>, default:
                      <code>2.5</code>
)
              â€“
              <div class="doc-md-description">
                <p>Initial and minimum temperatures for simulated annealing.</p>
              </div>
            </li>
            <li>
              <b><code>label_balanced_alpha</code></b>
                  (<code><span title="float">float</span></code>, default:
                      <code>0.94</code>
)
              â€“
              <div class="doc-md-description">
                <p>Temperature decay per outer iteration.</p>
              </div>
            </li>
            <li>
              <b><code>label_balanced_iters_per_T</code></b>
                  (<code><span title="int">int</span></code>, default:
                      <code>240</code>
)
              â€“
              <div class="doc-md-description">
                <p>Inner iterations per temperature level.</p>
              </div>
            </li>
            <li>
              <b><code>label_balanced_min_thickness_q</code></b>
                  (<code><span title="float">float</span></code>, default:
                      <code>0.5</code>
)
              â€“
              <div class="doc-md-description">
                <p>Only allow candidates at x where the layer thickness is at least the
given quantile (default 0.5 = top 50% thickest parts). Range [0,1].</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="streamgraph.smooth_series" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">smooth_series</span>


<a href="#streamgraph.smooth_series" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">smooth_series</span><span class="p">(</span><span class="n">Y</span><span class="p">,</span> <span class="n">window</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Apply moving average along time for each row of Y. Returns new array.</p>


    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="streamgraph.streamgraph_envelopes" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">streamgraph_envelopes</span>


<a href="#streamgraph.streamgraph_envelopes" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">streamgraph_envelopes</span><span class="p">(</span><span class="n">Y</span><span class="p">,</span> <span class="n">margin_frac</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">order_mode</span><span class="o">=</span><span class="s1">&#39;by_value&#39;</span><span class="p">,</span> <span class="n">X</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">wiggle_reduction</span><span class="o">=</span><span class="s1">&#39;none&#39;</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Compute bottom and top envelopes for each layer.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>Y</code></b>
                  (<code>(<span title="array">array</span>, <span title="shape">shape</span>(<span title="k">k</span>, <span title="n">n</span>))</code>)
              â€“
              <div class="doc-md-description">
                <p>Non-negative series as rows.</p>
              </div>
            </li>
            <li>
              <b><code>margin_frac</code></b>
                  (<code><span title="float">float</span></code>, default:
                      <code>0.0</code>
)
              â€“
              <div class="doc-md-description">
                <p>Fraction of the column sum reserved for gaps between layers.</p>
              </div>
            </li>
            <li>
              <b><code>order_mode</code></b>
                  (<code>(&#39;by_value&#39;, &#39;none&#39;)</code>, default:
                      <code>&#39;by_value&#39;,&#39;none&#39;</code>
)
              â€“
              <div class="doc-md-description">
                <p>Sorting at each time step or not.</p>
              </div>
            </li>
            <li>
              <b><code>X</code></b>
                  (<code><span title="array">array</span> - <span title="like">like</span> or None</code>, default:
                      <code>None</code>
)
              â€“
              <div class="doc-md-description">
                <p>Required when wiggle_reduction='weighted'. Ignored otherwise.</p>
              </div>
            </li>
            <li>
              <b><code>wiggle_reduction</code></b>
                  (<code>(&#39;none&#39;, &#39;unweighted&#39;, &#39;weighted&#39;)</code>, default:
                      <code>&#39;none&#39;,&#39;unweighted&#39;,&#39;weighted&#39;</code>
)
              â€“
              <div class="doc-md-description">
                <p>Baseline strategy to reduce wiggle. 'none' uses the classic centered
silhouette. 'unweighted' uses the closed-form deviation-minimizing
baseline. 'weighted' uses the Streamgraph baseline (requires X).</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Returns:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
                  <code>bottoms, tops : arrays of shape (k, n)</code>
              â€“
              <div class="doc-md-description">
                
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

    </div>

</div>



  </div>

    </div>

</div>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../guide/" class="btn btn-neutral float-left" title="Streamgraph demo"><span class="icon icon-circle-arrow-left"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/yourname/streamgraph" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
      <span><a href="../guide/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
